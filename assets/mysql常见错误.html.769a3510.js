import{_ as s,o as e,c as a,b as n}from"./app.634740c6.js";const l={},i=n(`<h1 id="mysql-\u5E38\u89C1\u9519\u8BEF" tabindex="-1"><a class="header-anchor" href="#mysql-\u5E38\u89C1\u9519\u8BEF" aria-hidden="true">#</a> mysql \u5E38\u89C1\u9519\u8BEF</h1><h2 id="_1-timestamp-\u9ED8\u8BA4\u503C-0000-00-00-00-00-00-\u62A5\u9519" tabindex="-1"><a class="header-anchor" href="#_1-timestamp-\u9ED8\u8BA4\u503C-0000-00-00-00-00-00-\u62A5\u9519" aria-hidden="true">#</a> 1. timestamp \u9ED8\u8BA4\u503C &#39;0000-00-00 00:00:00&#39; \u62A5\u9519</h2><h3 id="\u95EE\u9898\u63CF\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u95EE\u9898\u63CF\u8FF0" aria-hidden="true">#</a> \u95EE\u9898\u63CF\u8FF0</h3><p>\u5728\u521B\u5EFA\u8868\u65F6\uFF0C\u8BBE\u7F6E\u67D0\u4E00\u4E2A\u65F6\u95F4\u5217\u4E3A timestamp\uFF0C\u5E76\u4E14\u8BBE\u7F6E\u9ED8\u8BA4\u503C\u4E3A &#39;0000-00-00 00:00:00&#39;\uFF0C\u4F1A\u62A5\u4E00\u4E0B\u9519\u8BEF\u4FE1\u606F\uFF1A</p><blockquote><p>[Err] 1067 - Invalid default value for {columnName}</p></blockquote><h3 id="\u95EE\u9898\u6E90\u5934-sql-mode-\u53CA\u89E3\u51B3" tabindex="-1"><a class="header-anchor" href="#\u95EE\u9898\u6E90\u5934-sql-mode-\u53CA\u89E3\u51B3" aria-hidden="true">#</a> \u95EE\u9898\u6E90\u5934 sql_mode\uFF0C\u53CA\u89E3\u51B3</h3><blockquote><p>\u5728 sql_mode \u4E2D \u6A21\u5F0F\u662F\u4E0D\u5141\u8BB8\u8BBE\u7F6E\u6B64\u9ED8\u8BA4\u503C\u7684\uFF0C\u53EF\u4EE5\u770B\u4E00\u4E0B sql_mode \u7684\u5177\u4F53\u4FE1\u606F\uFF0C\u53EF\u4EE5\u4F7F\u7528\u5982\u4E0B\u547D\u4EE4\u67E5\u770B \u5F53\u524D\u4F1A\u8BDD\u6216\u8005\u5168\u5C40\u7684 sql_mode\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> @<span class="token variable">@GLOBAL.sql_mode</span><span class="token punctuation">;</span> <span class="token comment">-- \u67E5\u770B\u5168\u5C40\u6A21\u5F0F </span>
<span class="token keyword">SELECT</span> @<span class="token variable">@SESSION.sql_mode</span><span class="token punctuation">;</span> <span class="token comment">-- \u67E5\u770B\u5F53\u524D\u4F1A\u8BDD\u7684\u6A21\u5F0F</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230\u4E0B\u9762\u7684\u8F93\u51FA\u7ED3\u679C\uFF1A</p><blockquote><p>ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION</p></blockquote><p>\u4ECE\u4E0A\u9762\u6211\u4EEC\u53EF\u4EE5\u770B\u5230 sql_mode \u4E2D\u6709 NO_ZERO_IN_DATE \u548C NO_ZERO_DATE</p><blockquote><p>\u8981\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\u53EF\u4EE5\u5427 mode \u4E2D\u7684 NO_ZERO_IN_DATE \u548C NO_ZERO_DATE \u8BBE\u7F6E\u53BB\u6389\u5373\u53EF\uFF0C\u53EF\u4EE5\u8FD9\u6837\u8BBE\u7F6E</p></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- \u5176\u4E2Dmode\u7684\u503C\u4E3A\uFF1A&#39;STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> sql_mode <span class="token operator">=</span> {{<span class="token keyword">mode</span>}}<span class="token punctuation">;</span> <span class="token comment">// \u8BBE\u7F6E\u5168\u5C40</span>
<span class="token keyword">SET</span> <span class="token keyword">SESSION</span> sql_mode <span class="token operator">=</span> {{<span class="token keyword">mode</span>}}<span class="token punctuation">;</span> <span class="token comment">// \u8BBE\u7F6E\u5F53\u524D\u4F1A\u8BDD</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5E38\u89C1-mode-\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#\u5E38\u89C1-mode-\u8BF4\u660E" aria-hidden="true">#</a> \u5E38\u89C1 mode \u8BF4\u660E</h3><ol><li>ONLY_FULL_GROUP_BY\uFF1A\u51FA\u73B0\u5728select\u8BED\u53E5\u3001HAVING\u6761\u4EF6\u548CORDER BY\u8BED\u53E5\u4E2D\u7684\u5217\uFF0C\u5FC5\u987B\u662FGROUP BY\u7684\u5217\u6216\u8005\u4F9D\u8D56\u4E8EGROUP BY\u5217\u7684\u51FD\u6570\u5217\u3002</li><li>NO_AUTO_VALUE_ON_ZERO\uFF1A\u8BE5\u503C\u5F71\u54CD\u81EA\u589E\u957F\u5217\u7684\u63D2\u5165\u3002\u9ED8\u8BA4\u8BBE\u7F6E\u4E0B\uFF0C\u63D2\u51650\u6216NULL\u4EE3\u8868\u751F\u6210\u4E0B\u4E00\u4E2A\u81EA\u589E\u957F\u503C\u3002\u5982\u679C\u7528\u6237\u5E0C\u671B\u63D2\u5165\u7684\u503C\u4E3A0\uFF0C\u800C\u8BE5\u5217\u53C8\u662F\u81EA\u589E\u957F\u7684\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u9009\u9879\u5C31\u6709\u7528\u4E86\u3002</li><li>STRICT_TRANS_TABLES\uFF1A\u5728\u8BE5\u6A21\u5F0F\u4E0B\uFF0C\u5982\u679C\u4E00\u4E2A\u503C\u4E0D\u80FD\u63D2\u5165\u5230\u4E00\u4E2A\u4E8B\u52A1\u8868\u4E2D\uFF0C\u5219\u4E2D\u65AD\u5F53\u524D\u7684\u64CD\u4F5C\uFF0C\u5BF9\u975E\u4E8B\u52A1\u8868\u4E0D\u505A\u9650\u5236</li><li>NO_ZERO_IN_DATE\uFF1A\u8FD9\u4E2A\u6A21\u5F0F\u5F71\u54CD\u4E86\u662F\u5426\u5141\u8BB8\u65E5\u671F\u4E2D\u7684\u6708\u4EFD\u548C\u65E5\u5305\u542B0\u3002\u5982\u679C\u5F00\u542F\u6B64\u6A21\u5F0F\uFF0C2016-01-00\u662F\u4E0D\u5141\u8BB8\u7684\uFF0C\u4F46\u662F0000-02-01\u662F\u5141\u8BB8\u7684\u3002\u5B83\u5B9E\u9645\u7684\u884C\u4E3A\u53D7\u5230 strict mode\u662F\u5426\u5F00\u542F\u7684\u5F71\u54CD1\u3002</li><li>NO_ZERO_DATE\uFF1A\u8BBE\u7F6E\u8BE5\u503C\uFF0Cmysql\u6570\u636E\u5E93\u4E0D\u5141\u8BB8\u63D2\u5165\u96F6\u65E5\u671F\u3002\u5B83\u5B9E\u9645\u7684\u884C\u4E3A\u53D7\u5230 strictmode \u662F\u5426\u5F00\u542F\u7684\u5F71\u54CD\u3002</li><li>ERROR_FOR_DIVISION_BY_ZERO\uFF1A\u5728INSERT\u6216UPDATE\u8FC7\u7A0B\u4E2D\uFF0C\u5982\u679C\u6570\u636E\u88AB\u96F6\u9664\uFF0C\u5219\u4EA7\u751F\u9519\u8BEF\u800C\u975E\u8B66\u544A\u3002\u5982\u679C\u672A\u7ED9\u51FA\u8BE5\u6A21\u5F0F\uFF0C\u90A3\u4E48\u6570\u636E\u88AB\u96F6\u9664\u65F6MySQL\u8FD4\u56DENULL</li><li>NO_AUTO_CREATE_USER\uFF1A\u7981\u6B62GRANT\u521B\u5EFA\u5BC6\u7801\u4E3A\u7A7A\u7684\u7528\u6237</li><li>NO_ENGINE_SUBSTITUTION\uFF1A\u5982\u679C\u9700\u8981\u7684\u5B58\u50A8\u5F15\u64CE\u88AB\u7981\u7528\u6216\u672A\u7F16\u8BD1\uFF0C\u90A3\u4E48\u629B\u51FA\u9519\u8BEF\u3002\u4E0D\u8BBE\u7F6E\u6B64\u503C\u65F6\uFF0C\u7528\u9ED8\u8BA4\u7684\u5B58\u50A8\u5F15\u64CE\u66FF\u4EE3\uFF0C\u5E76\u629B\u51FA\u4E00\u4E2A\u5F02\u5E38</li><li>PIPES_AS_CONCAT\uFF1A\u5C06\u201D||\u201D\u89C6\u4E3A\u5B57\u7B26\u4E32\u7684\u8FDE\u63A5\u64CD\u4F5C\u7B26\u800C\u975E\u6216\u8FD0\u7B97\u7B26\uFF0C\u8FD9\u548COracle\u6570\u636E\u5E93\u662F\u4E00\u6837\u7684\uFF0C\u4E5F\u548C\u5B57\u7B26\u4E32\u7684\u62FC\u63A5\u51FD\u6570Concat\u76F8\u7C7B\u4F3C</li><li>ANSI_QUOTES\uFF1A\u542F\u7528ANSI_QUOTES\u540E\uFF0C\u4E0D\u80FD\u7528\u53CC\u5F15\u53F7\u6765\u5F15\u7528\u5B57\u7B26\u4E32\uFF0C\u56E0\u4E3A\u5B83\u88AB\u89E3\u91CA\u4E3A\u8BC6\u522B\u7B26</li></ol><h2 id="_2-mysql\u8FDE\u63A5\u672C\u5730\u62A5\u9519-1130-host-is-not-allowed-to-connect-to-this-mysql-server" tabindex="-1"><a class="header-anchor" href="#_2-mysql\u8FDE\u63A5\u672C\u5730\u62A5\u9519-1130-host-is-not-allowed-to-connect-to-this-mysql-server" aria-hidden="true">#</a> 2. Mysql\u8FDE\u63A5\u672C\u5730\u62A5\u9519\uFF1A1130-host ... is not allowed to connect to this MySQL server</h2><p>\u8FDB\u5165\u5230\u6570\u636E\u5E93\uFF0C\u5C06\u767B\u9646\u7684\u7528\u6237 host \u5B57\u6BB5\u4FEE\u6539\u4E3A %</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> <span class="token keyword">user</span> <span class="token keyword">set</span> host <span class="token operator">=</span> <span class="token string">&#39;%&#39;</span> <span class="token keyword">where</span> <span class="token keyword">user</span> <span class="token operator">=</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_3-error-1449-hy000-the-user-specified-as-a-definer-mysql-infoschema-localhost-does-not-exist" tabindex="-1"><a class="header-anchor" href="#_3-error-1449-hy000-the-user-specified-as-a-definer-mysql-infoschema-localhost-does-not-exist" aria-hidden="true">#</a> 3. ERROR 1449 (HY000): The user specified as a definer (&#39;mysql.infoschema&#39;@&#39;localhost&#39;) does not exist</h2><p>\u8FDB\u5165\u5230 mysql \u547D\u4EE4\u884C</p><ol><li><p>DROP USER &#39;mysql.infoschema&#39;@&#39;localhost&#39;;</p></li><li><p>CREATE USER &#39;mysql.infoschema&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;;</p></li><li><p>GRANT SELECT ON <em>.</em> TO <code>mysql.infoschema</code>@<code>localhost</code>;</p></li></ol><h2 id="_4-mysql\u76D1\u542C\u7684\u7AEF\u53E3\u53D8\u62100" tabindex="-1"><a class="header-anchor" href="#_4-mysql\u76D1\u542C\u7684\u7AEF\u53E3\u53D8\u62100" aria-hidden="true">#</a> 4. mysql\u76D1\u542C\u7684\u7AEF\u53E3\u53D8\u62100</h2><p>mysql \u670D\u52A1\u8FD0\u884C\u6B63\u5E38\uFF0C\u4F46\u662F3306\u7AEF\u53E3\u5374\u6CA1\u6709\u88AB\u5360\u7528\uFF0C\u53D1\u73B0\u7AEF\u53E3\u662F0</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>&lt;!-- \u767B\u5F55mysql\uFF0C\u68C0\u67E5mysql \u5360\u7528\u7AEF\u53E3 --&gt;
use mysql;
show global variables like &#39;port&#39;;
&lt;!-- \u67E5\u770B\u914D\u7F6E\u6587\u4EF6\u7684 skip-networking \u662F\u5426\u914D\u7F6E\uFF0C\u8FD9\u4E2A\u7AEF\u53E3\u4E3A on\u4F1A\u5BFC\u81F4\u8FD9\u4E2A\u95EE\u9898,\u8FDB\u5165\u5230\u914D\u7F6E\u6587\u4EF6\u6CE8\u91CA\u6389\u8FD9\u4E2A\u914D\u7F6E\u6216\u8005\u6539\u4E3AOFF\u5373\u53EF  --&gt;
show variables like &#39;skip_networking&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mysql8-\u4FEE\u6539\u5BC6\u7801" tabindex="-1"><a class="header-anchor" href="#mysql8-\u4FEE\u6539\u5BC6\u7801" aria-hidden="true">#</a> mysql8 \u4FEE\u6539\u5BC6\u7801</h2><ol><li><p>\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\uFF0C\u589E\u52A0 skip-grant-tables \u914D\u7F6E</p></li><li><p>\u514D\u5BC6\u767B\u5F55 root \u8D26\u53F7</p></li><li><p>\u4FEE\u6539\u5BC6\u7801,\u6709\u4E24\u79CD\u4FEE\u6539\u65B9\u5F0F</p></li></ol><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>&lt;!-- \u65B9\u5F0F1\u3001\u67E5\u770B\u5F53\u524D\u8BA4\u8BC1\u65B9\u5F0F\u4EE5\u53CA\u7528\u6237\uFF0C\u9ED8\u8BA4\u662F caching_sha2_password \u8BA4\u8BC1 --&gt;
select host, user, authentication_string, plugin from user;
&lt;!-- \u5982\u679C\u662F\u9ED8\u8BA4\u8BA4\u8BC1\u65B9\u5F0F\uFF0C\u5219\u4FEE\u6539\u4E3A\u5BC6\u7801\u8BA4\u8BC1\u4E3A mysql_native_password --&gt;
\u53EF\u4EE5\u76F4\u63A5\u7528sql\u4FEE\u6539\uFF1A
update user set plugin = &#39;mysql_native_password&#39; where user = &#39;root&#39;;
\u4E5F\u53EF\u4EE5\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u6DFB\u52A0\u4E0B\u9762\u7684\u8BED\u53E5\u540E\u91CD\u542F\uFF1A
default_authentication_plugin=mysql_native_password

&lt;!-- \u65B9\u5F0F2\u3001\u4E0D\u80FD\u76F4\u63A5\u4FEE\u6539\u5BC6\u7801\uFF0C\u4F1A\u62A5\u9519\u3002\u8981\u5148\u6E05\u7A7Aroot\u5BC6\u7801 --&gt;
update user set authentication_string=&#39;&#39; where user=&#39;root&#39;; 
flush privileges;
&lt;!-- \u9000\u51FAmysql, \u5220\u9664/etc/my.cnf\u6587\u4EF6\u91CC\u7684 skip-grant-tables \uFF0C\u91CD\u542F mysql \u670D\u52A1\uFF0C\u518D\u6B21\u767B\u9646\u7684\u65F6\u5019\u662F\u7A7A\u5BC6\u7801\u767B\u9646\uFF1A --&gt;
mysql -u root -p
&lt;!-- \u767B\u9646\u540E\u5373\u53EF\u4FEE\u6539\u5BC6\u7801\u4E86\uFF1A --&gt;
ALTER USER &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39;;
flush privileges;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,27),o=[i];function d(t,r){return e(),a("div",null,o)}var p=s(l,[["render",d],["__file","mysql\u5E38\u89C1\u9519\u8BEF.html.vue"]]);export{p as default};
